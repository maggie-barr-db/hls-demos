{
  "name": "daily_silver_load_incr_py_serverless_api",
  "tasks": [
    {
      "task_key": "load_claims_silver",
      "spark_python_task": {
        "python_file": "/Workspace/Shared/hls-demos/demos/serverless-jobs-demo/src/serverless/scripts/silver/load_fact_claims.py",
        "source": "WORKSPACE",
        "parameters": [
          "--catalog_name",
          "mbarrett",
          "--load_type",
          "full"
        ]
      },
      "libraries": [],
      "environment_key": "serverless_environment_demo"
    },
    {
      "task_key": "load_patient_encounters_silver",
      "spark_python_task": {
        "python_file": "/Workspace/Shared/hls-demos/demos/serverless-jobs-demo/src/serverless/scripts/silver/load_fact_patient_encounters.py",
        "source": "WORKSPACE",
        "parameters": [
          "--catalog_name",
          "mbarrett",
          "--load_type",
          "full"
        ]
      },
      "libraries": [],
      "environment_key": "serverless_environment_demo"
    },
    {
      "task_key": "load_medications_silver",
      "spark_python_task": {
        "python_file": "/Workspace/Shared/hls-demos/demos/serverless-jobs-demo/src/serverless/scripts/silver/load_fact_medications.py",
        "source": "WORKSPACE",
        "parameters": [
          "--catalog_name",
          "mbarrett",
          "--load_type",
          "full"
        ]
      },
      "libraries": [],
      "environment_key": "serverless_environment_demo"
    },
    {
      "task_key": "load_procedures_silver",
      "spark_python_task": {
        "python_file": "/Workspace/Shared/hls-demos/demos/serverless-jobs-demo/src/serverless/scripts/silver/load_fact_procedures.py",
        "source": "WORKSPACE",
        "parameters": [
          "--catalog_name",
          "mbarrett",
          "--load_type",
          "full"
        ]
      },
      "libraries": [],
      "environment_key": "serverless_environment_demo"
    },
    {
      "task_key": "load_member_monthly_snapshot_gold",
      "depends_on": [
        {
          "task_key": "load_claims_silver"
        },
        {
          "task_key": "load_patient_encounters_silver"
        },
        {
          "task_key": "load_medications_silver"
        },
        {
          "task_key": "load_procedures_silver"
        }
      ],
      "spark_python_task": {
        "python_file": "/Workspace/Shared/hls-demos/demos/serverless-jobs-demo/src/serverless/scripts/gold/load_fact_member_monthly_snapshot.py",
        "source": "WORKSPACE",
        "parameters": [
          "--catalog_name",
          "mbarrett"
        ]
      },
      "libraries": [],
      "environment_key": "serverless_environment_demo"
    }
  ],
  "queue": {
    "enabled": true
  },
  "environments": [
    {
      "environment_key": "serverless_environment_demo",
      "spec": {
        "client": "4",
        "dependencies": [
          "-r /Volumes/mbarrett/synthea/admin_configs/requirements.txt"
        ]
      }
    }
  ],
  "schedule": {
    "quartz_cron_expression": "0 30 2 * * ?",
    "timezone_id": "UTC",
    "pause_status": "PAUSED"
  },
  "budget_policy_id": "{{USAGE_POLICY_ID}}",
  "max_concurrent_runs": 1,
  "format": "MULTI_TASK"
}
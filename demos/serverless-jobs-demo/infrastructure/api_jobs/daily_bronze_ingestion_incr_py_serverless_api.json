{
  "name": "daily_bronze_ingestion_incr_py_serverless_api",
  "tasks": [
    {
      "task_key": "bronze_ingest",
      "spark_python_task": {
        "python_file": "/Workspace/Shared/hls-demos/demos/serverless-jobs-demo/src/serverless/bronze/bronze_ingest.py",
        "source": "WORKSPACE",
        "parameters": [
          "--catalog_name",
          "mbarrett",
          "--base_volume_path",
          "/Volumes/mbarrett/synthea/landing"
        ]
      },
      "environment_key": "serverless_environment_demo"
    },
    {
      "task_key": "bronze_archive",
      "depends_on": [
        {
          "task_key": "bronze_ingest"
        }
      ],
      "spark_python_task": {
        "python_file": "/Workspace/Shared/hls-demos/demos/serverless-jobs-demo/src/serverless/bronze/bronze_archive.py",
        "source": "WORKSPACE",
        "parameters": [
          "--base_volume_path",
          "/Volumes/mbarrett/synthea/landing"
        ]
      },
      "environment_key": "serverless_environment_demo"
    }
  ],
  "queue": {
    "enabled": true
  },
  "environments": [
    {
      "environment_key": "serverless_environment_demo",
      "spec": {
        "client": "4",
        "dependencies": [
          "-r /Volumes/mbarrett/synthea/admin_configs/requirements.txt"
        ]
      }
    }
  ],
  "schedule": {
    "quartz_cron_expression": "0 0 2 * * ?",
    "timezone_id": "UTC",
    "pause_status": "PAUSED"
  },
  "budget_policy_id": "{{USAGE_POLICY_ID}}",
  "max_concurrent_runs": 1,
  "format": "MULTI_TASK"
}